USE solucoes;

DROP TABLE IF EXISTS HISTORICO;
DROP TABLE IF EXISTS ALUNOS;
DROP TABLE IF EXISTS DISCIPLINAS;

-- Criação da tabela ALUNOS
CREATE TABLE IF NOT EXISTS ALUNOS (
    matricula INT PRIMARY KEY,
    nome VARCHAR(100),
    endereco VARCHAR(100),
    cidade VARCHAR(50)
);

-- Criação da tabela DISCIPLINAS
CREATE TABLE IF NOT EXISTS DISCIPLINAS (
    codigo VARCHAR(10) PRIMARY KEY,
    nome VARCHAR(100),
    carga INT
);

-- Criação da tabela HISTORICO
CREATE TABLE IF NOT EXISTS HISTORICO (
    matricula INT,
    codigo VARCHAR(10),
    ano INT,
    nota INT,
    frequencia INT,
    PRIMARY KEY (matricula, codigo, ano),
    FOREIGN KEY (matricula) REFERENCES ALUNOS(matricula),
    FOREIGN KEY (codigo) REFERENCES DISCIPLINAS(codigo)
);

-- Inserindo dados na tabela ALUNOS
INSERT INTO ALUNOS(matricula, nome, endereco, cidade) VALUES
 (2015010101, 'JOSE DE ALENCAR', 'RUA DAS ALMAS', 'NATAL'),
 (2015010102, 'JOÃO JOSÉ', 'AVENIDA RUY CARNEIRO', 'JOÃO PESSOA'),
 (2015010103, 'MARIA JOAQUINA', 'RUA CARROSSEL', 'RECIFE'),
 (2015010104, 'MARIA DAS DORES', 'RUA DAS LADEIRAS', 'FORTALEZA'),
 (2015010105, 'JOSUÉ CLAUDINO DOS SANTOS', 'CENTRO', 'NATAL'),
 (2015010106, 'JOSUÉLISSON CLAUDINO DOS SANTOS', 'CENTRO', 'NATAL'),
 (2015010107, 'LAUDELINO PEREIRA', 'QUADRA 1', 'CEU');

-- Inserindo dados na tabela DISCIPLINAS
INSERT INTO DISCIPLINAS(codigo, nome, carga) VALUES
 ('BD', 'BANCO DE DADOS', 100),
 ('POO', 'PROGRAMAÇÃO COM ACESSO A BANCO DE DADOS', 100),
 ('WEB', 'AUTORIA WEB', 50),
 ('ENG', 'ENGENHARIA DE SOFTWARE', 80);

-- Inserindo dados na tabela HISTORICO
INSERT INTO HISTORICO(matricula, codigo, ano, nota, frequencia) VALUES
 (2015010101, 'BD', 2022, 60, 95),
 (2015010101, 'POO', 2022, 44, 72),
 (2015010101, 'WEB', 2022, 70, 79),
 (2015010101, 'ENG', 2022, 7, 61),
 (2015010102, 'BD', 2022, 0, 95),
 (2015010102, 'POO', 2022, 20, 49),
 (2015010102, 'WEB', 2022, 16, 28),
 (2015010102, 'ENG', 2022, 54, 84),
 (2015010103, 'BD', 2022, 61, 59),
 (2015010103, 'POO', 2022, 3, 32),
 (2015010103, 'WEB', 2022, 88, 96),
 (2015010103, 'ENG', 2022, 38, 90),
 (2015010104, 'BD', 2022, 33, 88),
 (2015010104, 'POO', 2022, 33, 64),
 (2015010104, 'WEB', 2022, 1, 86),
 (2015010104, 'ENG', 2022, 66, 70),
 (2015010105, 'BD', 2022, 27, 69),
 (2015010105, 'POO', 2022, 19, 56),
 (2015010105, 'WEB', 2022, 15, 18),
 (2015010105, 'ENG', 2022, 22, 94),
 (2015010106, 'BD', 2022, 65, 94),
 (2015010106, 'POO', 2022, 30, 88),
 (2015010106, 'WEB', 2022, 13, 58),
 (2015010106, 'ENG', 2022, 5, 25),
 (2015010101, 'BD', 2023, 100, 95),
 (2015010101, 'POO', 2023, 32, 57),
 (2015010101, 'ENG', 2023, 21, 49),
 (2015010102, 'BD', 2023, 3, 42),
 (2015010102, 'POO', 2023, 43, 97),
 (2015010102, 'WEB', 2023, 63, 93),
 (2015010102, 'ENG', 2023, 67, 91),
 (2015010103, 'BD', 2023, 80, 85),
 (2015010103, 'POO', 2023, 50, 98),
 (2015010103, 'ENG', 2023, 64, 73),
 (2015010104, 'BD', 2023, 5, 46),
 (2015010104, 'POO', 2023, 24, 46),
 (2015010104, 'WEB', 2023, 66, 80),
 (2015010105, 'BD', 2023, 74, 86),
 (2015010105, 'POO', 2023, 51, 82),
 (2015010105, 'WEB', 2023, 11, 52),
 (2015010105, 'ENG', 2023, 31, 94),
 (2015010106, 'POO', 2023, 23, 86),
 (2015010106, 'WEB', 2023, 55, 91),
 (2015010106, 'ENG', 2023, 34, 69);
